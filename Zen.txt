gggg



if OBJECT_ID ('dbo.Colors') is null----Софія
CREATE TABLE dbo.Colors (
	ID tinyint not null ,
	Name varchar(20) not null,
	CONSTRAINT PK_Colors PRIMARY KEY CLUSTERED (ID ASC),
	CONSTRAINT UN_Colors_Name UNIQUE NONCLUSTERED (Name)
);
GO

if OBJECT_ID ('dbo.Categories') is null----Віолетта
CREATE TABLE dbo.Categories (
	ID tinyint not null ,
	Name varchar(40) not null,
	CONSTRAINT PK_Categories PRIMARY KEY CLUSTERED (ID ASC), 
    CONSTRAINT UN_Categorie_Name UNIQUE NONCLUSTERED (Name)
);
GO


if OBJECT_ID ('dbo.Positions') is null----Володя
CREATE TABLE dbo.Positions (
    ID tinyint not null,
	Name varchar(40) not null ,
	Salary decimal (7,2) not null,
	CONSTRAINT PK_Positions PRIMARY KEY CLUSTERED (ID ASC)
);
GO

IF OBJECT_ID('dbo.BonusDetails') IS NULL----ВІКА ДОБРУСЬ
CREATE TABLE dbo.BonusDetails (
    ID int NOT NULL,
	BonusName varchar(30),
	[Percent] int,
    Limit decimal (7,2),
	CONSTRAINT PK_BonusDetails PRIMARY KEY CLUSTERED (ID ASC),
	CONSTRAINT UN_BonusDetails_BonusName UNIQUE NONCLUSTERED (BonusName)
);
GO

IF OBJECT_ID('dbo.BonusCards') IS NULL----ВІКА ДОБРУСЬ
CREATE TABLE dbo.BonusCards (
    ID int NOT NULL IDENTITY (1,1),
    CardNumber int NOT NULL,
	BonusDetailsID int,
	[Status] bit NOT NULL,
	CONSTRAINT PK_BonusCards PRIMARY KEY CLUSTERED (ID ASC),
	CONSTRAINT UN_BonusCards_CardNumber UNIQUE NONCLUSTERED (CardNumber),
	CONSTRAINT FK_BonusCards_BonusDetailsID FOREIGN KEY (BonusDetailsID)
	REFERENCES BonusDetails(ID)
);
GO
 
 IF OBJECT_ID('dbo.PiggyBanks') IS NULL----ВІКА ДОБРУСЬ
CREATE TABLE dbo.PiggyBanks (
    ID int NOT NULL IDENTITY (1,1),
	BonusCardsID int,
    [Sum] decimal (7,2),
	CONSTRAINT PK_PiggyBanks PRIMARY KEY CLUSTERED (ID ASC),
	CONSTRAINT FK_PiggyBanks_BonusCardsID FOREIGN KEY (BonusCardsID)
	REFERENCES BonusCards(ID)
);
GO



IF OBJECT_ID('dbo.Guarantees') IS NULL---Остап
CREATE TABLE dbo.Guarantees (
    ID tinyint NOT NULL,
    MonthTerm tinyint NOT NULL,
    GuaranteePrice decimal (7,2) NOT NULL,
    CONSTRAINT PK_Guarantees PRIMARY KEY CLUSTERED (ID ASC)
);
GO


if OBJECT_ID ('dbo.Countries') is null----Святослав
CREATE TABLE dbo.Countries(
    ID tinyint not null ,
	Name varchar(40) not null,
	CONSTRAINT PK_Countries PRIMARY KEY CLUSTERED (ID ASC)
);
GO

if OBJECT_ID ('dbo.Cities') is null----Святослав
CREATE TABLE dbo.Cities(
    ID tinyint not null ,
	Name varchar(40) not null,
	CountryID tinyint not null,
	CONSTRAINT PK_Cities PRIMARY KEY CLUSTERED (ID ASC),
	CONSTRAINT FK_Cities_CountryID FOREIGN KEY (CountryID)
	REFERENCES Countries(ID)
);
GO


if OBJECT_ID ('dbo.Suppliers') is null----СВЯТОСЛАВ
CREATE TABLE dbo.Suppliers(
    ID tinyint not null ,
	SupplierName varchar(60) not null ,
	CityID tinyint not null ,
	Phone varchar(20) not null,
	Email varchar(40) not null,
	CONSTRAINT PK_Suppliers PRIMARY KEY CLUSTERED (ID ASC),
	CONSTRAINT FK_Suppliers_CityID FOREIGN KEY (CityID)
	REFERENCES Cities(ID)
);
GO

IF OBJECT_ID ('dbo.ReturnReasons') is null----ТАНЯ
CREATE TABLE dbo.ReturnReasons (
    ID tinyint not null,
	ReasonName varchar(60)
	CONSTRAINT PK_ReturnReasons PRIMARY KEY CLUSTERED (ID ASC)
);
GO

if OBJECT_ID ('dbo.DeliveryType') is null--------Сергій
CREATE TABLE dbo.DeliveryType (
    ID tinyint not null,
	Name varchar(50) not null,
	CONSTRAINT PK_DeliveryType PRIMARY KEY CLUSTERED (ID ASC),
    CONSTRAINT UN_DeliveryType_Name UNIQUE NONCLUSTERED (Name)
);
GO

if OBJECT_ID ('dbo.CustomerDetails') is null----Сергій
CREATE TABLE dbo.CustomerDetails (
    ID int not null identity (1,1),
	Phone varchar(12) not null,
	Email varchar(50),
	CityID tinyint,
	CONSTRAINT PK_CustomerDetails PRIMARY KEY CLUSTERED (ID ASC),
	CONSTRAINT FK_CustomersDetails_CityID FOREIGN KEY (CityID)
	REFERENCES Cities(ID)
);
GO

if OBJECT_ID ('dbo.Customers') is null----Сергій
CREATE TABLE dbo.Customers (
    ID int not null identity (1,1),
	FirstName varchar(50) not null,
	LastName varchar(50) not null,
	CustomerDetailID int not null,
	BonusCardID int not null,
	RegistrationDate date not null,
	CONSTRAINT PK_Customers PRIMARY KEY CLUSTERED (ID ASC),
	CONSTRAINT FK_Customers_CustomerDetailID FOREIGN KEY (CustomerDetailID)
	REFERENCES CustomerDetails(ID),	
	CONSTRAINT FK_Customers_BonusCardID FOREIGN KEY (BonusCardID)
	REFERENCES BonusCards(ID)
);
GO



if OBJECT_ID ('dbo.Memories') is null----Софія
CREATE TABLE dbo.Memories (
	ID tinyint not null ,
	Name varchar(40) not null,
	CONSTRAINT PK_Memories PRIMARY KEY CLUSTERED (ID ASC),
	CONSTRAINT UN_Memories_Name UNIQUE NONCLUSTERED (Name)
);
GO

if OBJECT_ID ('dbo.Screens') is null----Віолетта
CREATE TABLE dbo.Screens (
	ID tinyint not null,
	Name varchar(40) not null, 
	CONSTRAINT PK_Screens PRIMARY KEY CLUSTERED (ID ASC),
    CONSTRAINT UN_Screens_Name UNIQUE NONCLUSTERED (Name)
);
GO

if OBJECT_ID ('dbo.Products') is null----Віолетта
CREATE TABLE dbo.Products (
	ID int not null identity (1,1),
	SerialNumber int not null,
	ProductName varchar(100),
	CategoryID tinyint not null,
	ColorID tinyint,
	MemoryID tinyint,
	ScreenID tinyint,
	CONSTRAINT PK_Products PRIMARY KEY CLUSTERED (ID ASC),
    CONSTRAINT UN_Products_SerialNumber UNIQUE NONCLUSTERED (SerialNumber),
	CONSTRAINT FK_Products_CategoryID FOREIGN KEY (CategoryID)
	REFERENCES Categories(ID),
	CONSTRAINT FK_Products_ColorID FOREIGN KEY (ColorID)
	REFERENCES Colors(ID),
	CONSTRAINT FK_Products_MemoryID FOREIGN KEY (MemoryID)
	REFERENCES Memories(ID),
	CONSTRAINT FK_Products_ScreenID FOREIGN KEY (ScreenID)
	REFERENCES Screens(ID)
);
GO



if OBJECT_ID ('dbo.Stores') is null----СОФІЯ
CREATE TABLE dbo.Stores (
	ID tinyint not null,
	Name varchar (20)  not null,
	CONSTRAINT PK_Stores PRIMARY KEY CLUSTERED (ID ASC),
	
);
GO

if OBJECT_ID ('dbo.DetailStores') is null----СОФІЯ
CREATE TABLE dbo.DetailStores (
    StoreID tinyint not null,
    CityID tinyint not null,
    Address varchar(60) ,
    Phone varchar (20) not null,
    Email varchar (30) not null,
    CONSTRAINT FK_DetailStores_StoreID FOREIGN KEY (StoreID)
REFERENCES Stores (ID), 
    CONSTRAINT FK_Stores_CityID FOREIGN KEY (CityID)
    REFERENCES Cities(ID)
);
GO



if OBJECT_ID ('dbo.EmployeeDetails') is null----Віка А
CREATE TABLE dbo.EmployeeDetails (
            ID int not null identity (1,1),
	Email varchar (40) not null,
	Birthday date not null,
	CityID tinyint,
	CONSTRAINT PK_EmployeeDetails PRIMARY KEY CLUSTERED (ID ASC),
	CONSTRAINT UN_EmployeeDetails_Email UNIQUE (Email),
	CONSTRAINT FK_EmployeeDetails_CityID FOREIGN KEY (CityID)
	REFERENCES Cities(ID)
	);
GO

if OBJECT_ID ('dbo.EmployeePhones') is null----Віка А
CREATE TABLE EmployeePhones (
	ID int not null identity (1,1),
	EmployeeDetailID int,
	PhoneNumber varchar (20) not null,
	CONSTRAINT PK_EmployeePhones PRIMARY KEY CLUSTERED (ID ASC),
	CONSTRAINT FK_EmployeePhones_EmployeeDetailID FOREIGN KEY (EmployeeDetailID)
	REFERENCES EmployeeDetails(ID)
	);
GO	




if OBJECT_ID ('dbo.Employees') is null----ВОЛОДЯ
CREATE TABLE dbo.Employees (
    ID int not null,
	FirstName varchar(40) not null ,
	LastName varchar(40) not null,
	EmployeeDetailsID int not null,
	HireDate date not null,
	FireDate date null,
	IsActive bit not null,
	ReportsTo int null,
	PositionID tinyint not null,
	CONSTRAINT PK_Employees PRIMARY KEY CLUSTERED (ID ASC),
	CONSTRAINT FK_Employees_EmployeeDetailsID FOREIGN KEY (EmployeeDetailsID)
	REFERENCES EmployeeDetails(ID),
	CONSTRAINT FK_EmployeesPositionID FOREIGN KEY (PositionID)
	REFERENCES Positions(ID),
	CONSTRAINT FK_Employees_ReportsTo FOREIGN KEY (ReportsTo)
	REFERENCES Employees(ID)
	);
GO

if OBJECT_ID ('dbo.SalaryHistories') is null----ВОЛОДЯ
CREATE TABLE SalaryHistories (
	ID int not null identity(1,1),
	EmployeeID int NOT NULL,
	SalaryDate date NOT NULL,
	Amount decimal(7,2) NOT NULL,
	CONSTRAINT PK_SalaryHistories PRIMARY KEY CLUSTERED (ID ASC),
	CONSTRAINT FK_SalaryHistories_EmployeeID FOREIGN KEY(EmployeeID)
	REFERENCES Employees(ID)
);
GO


if OBJECT_ID ('dbo.EmployeeStores') is null----Софія
CREATE TABLE dbo.EmployeeStores (
	ID int not null identity (1,1),
	StoreID tinyint not null, 
    EmployeeID int not null
	CONSTRAINT PK_EmployeeStores PRIMARY KEY CLUSTERED (ID ASC),
    CONSTRAINT FK_EmployeeStores_EmployeeID FOREIGN KEY (EmployeeID)
	REFERENCES Employees(ID),
    CONSTRAINT FK_EmployeeStores_StoreID FOREIGN KEY (StoreID)
	REFERENCES Stores(ID)
);
GO


if OBJECT_ID ('dbo.Warehouses') is null----Віка А
CREATE TABLE dbo.Warehouses (
	ID int not null identity (1,1),
	ProductID int,
	SupplierID tinyint,
	DeliveryDay date not null,
	Price decimal(7,2) not null, --- purchase price, cost 
	CONSTRAINT PK_Warehouses PRIMARY KEY CLUSTERED (ID ASC),
	CONSTRAINT FK_Warehouses_ProductID FOREIGN KEY (ProductID)
	REFERENCES Products(ID),
	CONSTRAINT FK_Warehouses_SupplierID FOREIGN KEY (SupplierID)
	REFERENCES Suppliers(ID)	
);
GO




IF OBJECT_ID('dbo.Orders') IS NULL----Остап
CREATE TABLE dbo.Orders (
    ID int not null identity (1,1),
	EmployeeStoreID int not null,
    CustomerID int not null,
    DateOfSale datetime not null,
    ProductID int not null,
	EmployeesBonus decimal (7,2) not null,
    OrderPrice decimal (7,2) not null,
	DeliveryTypeID tinyint not null,
    DeliveryAddress varchar (100) not null,
    GuaranteeID tinyint not null,
    EndDayGuarantee date not null,
	CONSTRAINT PK_Orders PRIMARY KEY CLUSTERED (ID ASC),
	CONSTRAINT FK_Orders_EmployeeStoreID FOREIGN KEY (EmployeeStoreID)
	REFERENCES EmployeeStores(ID),
	CONSTRAINT FK_Orders_CustomerID FOREIGN KEY (CustomerID)
	REFERENCES Customers(ID),
	CONSTRAINT FK_Orders_ProductID  FOREIGN KEY (ProductID)
	REFERENCES Products(ID),
	CONSTRAINT FK_Orders_GuaranteeID FOREIGN KEY (GuaranteeID)
	REFERENCES Guarantees(ID),
	CONSTRAINT FK_Orders_DeliveryTypeID FOREIGN KEY (DeliveryTypeID)
	REFERENCES DeliveryType(ID)
);
GO


IF OBJECT_ID ('dbo.ReturnOrders') is null----ТАНЯ
CREATE TABLE dbo.ReturnOrders (
    ID int not null identity (1,1) ,
	OrdersID int not null ,
	DateReturn datetime not null,
	ReasonID tinyint not null,
	CONSTRAINT PK_ReturnOrders PRIMARY KEY CLUSTERED (ID ASC),
	CONSTRAINT FK_ReturnOrders_OrdersID FOREIGN KEY (OrdersID)
	REFERENCES Orders(ID),
	CONSTRAINT FK_ReturnOrders_ReasonID FOREIGN KEY (ReasonID)
	REFERENCES ReturnReasons(ID)
);
GO








